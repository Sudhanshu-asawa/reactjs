import React from 'react';
import { Rotate } from './icons';
import DateField from './DateField';
import NumberField from './NumberField';
import HolderField from './HolderField';
const MainCardData = (props) => {
    const card = React.useRef(null);
    const [numberEdit, setNumberEdit] = React.useState(false);
    const [holderEdit, setHolderEdit] = React.useState(false);
    const [monthEdit, setMonthEdit] = React.useState(false);
    const [yearEdit, setYearEdit] = React.useState(false);
    const handleClick = (e) => {
        if (card.current.contains(e.target))
            return;
        setNumberEdit(false);
        setMonthEdit(false);
        setYearEdit(false);
        setHolderEdit(false);
    };
    React.useEffect(() => {
        var _a;
        if (((_a = props.number) === null || _a === void 0 ? void 0 : _a.length) === 16)
            setNumberEdit(false);
        document.addEventListener('mousedown', handleClick, true);
        return () => {
            document.removeEventListener("mousedown", handleClick, true);
        };
    }, [props.number]);
    return (React.createElement("div", { className: "component-atm-card", ref: card, style: {
            backgroundImage: props.bgImage ? `url(${props.bgImage})` : '',
            backgroundColor: props.bgColor ? props.bgColor : '',
            width: 430 * (props.scale ? props.scale : 1),
            height: 270 * (props.scale ? props.scale : 1),
            padding: 15 * (props.scale ? props.scale : 1)
        } },
        React.createElement("div", { className: "component-atm-card-bank" }, props.bankLogo),
        React.createElement("div", { className: "component-atm-card-controls" },
            React.createElement("i", { onClick: () => props.onRotate ? props.onRotate() : {} },
                React.createElement(Rotate, { size: 34 * (props.scale ? props.scale : 1), color: props.dataColor ? props.dataColor : '' }))),
        React.createElement(NumberField, { numberFontSize: props.numberFontSize, fontFamily: props.fontFamily, hideDigits: props.hideDigits, number: props.number, scale: props.scale, dataColor: props.dataColor, onChange: props.onChange, numberEdit: numberEdit, onNumberEdit: (flag) => setNumberEdit(flag) }),
        React.createElement(HolderField, { fontFamily: props.fontFamily, holderName: props.holderName, onHolderEdit: (flag) => setHolderEdit(flag), holderEdit: holderEdit, scale: props.scale, dataColor: props.dataColor, onChange: props.onChange }),
        React.createElement(DateField, { fontFamily: props.fontFamily, year: props.year, month: props.month, onChange: props.onChange, scale: props.scale, monthEdit: monthEdit, yearEdit: yearEdit, onMonthEdit: (flag) => setMonthEdit(flag), onYearEdit: (flag) => setYearEdit(flag), dataColor: props.dataColor }),
        React.createElement("div", { className: "component-atm-card-system-logo" }, props.system)));
};
export default MainCardData;
